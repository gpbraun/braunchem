%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  ______                       _____ _                      %
%  | ___ \                     /  __ \ |                     %
%  | |_/ /_ __ __ _ _   _ _ __ | /  \/ |__   ___ _ __ ___    %
%  | ___ \ '__/ _` | | | | '_ \| |   | '_ \ / _ \ '_ ` _ \   %
%  | |_/ / | | (_| | |_| | | | | \__/\ | | |  __/ | | | | |  %
%  \____/|_|  \__,_|\__,_|_| |_|\____/_| |_|\___|_| |_| |_|  %
%                                                            %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%  The brauncolor Package
%
%          --  Color Pallets  -- 
%
%============================================================%
%
%  GABRIEL P. BRAUN, 2019-2021
%
%============================================================%
%
%  CONTACT: braun.pineschi@gmail.com
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                              
%   PACKAGE REQUIREMENTS AND SETUP                   
%                                              
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage { l3keys2e }

\ExplSyntaxOn

\tl_const:Nn \c_brauncolor_date_tl                 {2021/08/12}
\tl_const:Nn \c_brauncolor_version_major_number_tl {1}
\tl_const:Nn \c_brauncolor_version_minor_number_tl {3}
\tl_const:Nn \c_brauncolor_version_subrelease_tl   {a}
\tl_const:Nx \c_brauncolor_version_number_tl
	{
			\c_brauncolor_version_major_number_tl .
			\c_brauncolor_version_minor_number_tl
	}
\tl_const:Nx \c_brauncolor_version_tl
	{
		\c_brauncolor_version_number_tl
		\c_brauncolor_version_subrelease_tl
	}
\tl_const:Nn \c_brauncolor_info_tl { Color ~ Pallets }

\ProvidesExplPackage
	{ brauncolor }
	{ \c_brauncolor_date_tl    }
	{ \c_brauncolor_version_tl }
	{ \c_brauncolor_info_tl    }

%============================================================%
%   VARIANTS OF KERNEL FUNCTIONS
%============================================================%

\cs_generate_variant:Nn \color_select:n {e}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                              
%   INTERFACE                 
%                                              
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cs_gset_eq:NN \legacydefinecolor \definecolor
\cs_gset_eq:NN \legacycolor       \color

\keys_define:nn { braun/color }
    {
        legacy .bool_set:N = \l_braun_color_legacy_bool,
        legacy .initial:n  = false,
        legacy .default:n  = true,
    }

% redefines \definecolor to use l3color
\DeclareDocumentCommand \definecolor { m m m }
    { 
        \legacydefinecolor {#1} {#2} {#3} 
        \color_set:nnn     {#1} {#2} {#3} 
    }

% % redefines \color to use l3color
% \DeclareDocumentCommand \color { o m } { \color_select:e {#2} }

% \cs_set:Npn \legacycolor
%     {
%         \cs_set_eq:NN \color \legacycolor
%     }


% \pgfplotsset
%     {
%         compat = newest,
%         samples = 200,
%         cycle list name = braun-pallet,
%         every axis plot/.append style = ultra thick,
%     }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                              
%   COLOR PALLETS             
%                                              
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% #1 -> color pallet name
\cs_set:Npn \SetColorPallet #1
    {
        \str_case:nn {#1}
            {
                { classic }
                { 
                    \definecolor { color-1 } { HTML } { 00345A } % PrussianBlue
                    \definecolor { color-2 } { HTML } { C21E56 } % RoseRed
                    \definecolor { color-3 } { HTML } { FDD166 } % PensiYellow
                    \definecolor { color-4 } { HTML } { 009F6B } % GreenNCS
                    \definecolor { gray-1  } { HTML } { 727176 } % PESC
                    \definecolor { gray-2  } { HTML } { 87868A } % PESC
                    \definecolor { gray    } { HTML } { 87868A } % PESC
                }            
            }
    }

\cs_set:Npn \SetMainColor #1 #2 { \definecolor { color-1 } { #1 } { #2 } }

\keys_define:nn { braun/color }
    {
        pallet .code:n    = \SetColorPallet {#1},
        pallet .initial:n = classic,
    }

\ProcessKeysOptions { braun/colors }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                              
%   THE END!!!
%                                              
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ExplSyntaxOff